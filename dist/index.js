!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).index=e()}(this,(function(){"use strict";var t=2768,e=495,i=140,r=[],o=[1],s=["U ","U2","U'","R ","R2","R'","F ","F2","F'","D ","D2","D'","L ","L2","L'","B ","B2","B'"],n=[0,1,2,4,7,9,10,11,13,16,3,5,6,8,12,14,15,17],h=[],a=[],u=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],[6,7,8,0,1,2,3,4,5,15,16,17,9,10,11,12,13,14],[3,4,5,6,7,8,0,1,2,12,13,14,15,16,17,9,10,11],[2,1,0,5,4,3,8,7,6,11,10,9,14,13,12,17,16,15],[8,7,6,2,1,0,5,4,3,17,16,15,11,10,9,14,13,12],[5,4,3,8,7,6,2,1,0,14,13,12,17,16,15,11,10,9]],f=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],p=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]],v=[],c=[],l=[],m=[],d=[],M=[],C=[],g=[],y=[],S=[],b=[],w=[],P=[],E=[],x=[],F=[],j=[],L=[],U=[],D=[],T=[],R=[],k=[],I=[],B=[],W=[],q=[],O=[],z=[],A=[],G=[],H=[],J=[],K=[];function N(t,e,i){return i?e<<1|1&t:e|248&t}function Q(t,e){return e?t>>1:7&t}function V(t,e,i){t[e>>3]^=i<<(e<<2)}function X(t,e){return t[e>>3]>>(e<<2)&15}function Y(t,e,i){return Math.min(t,e[i>>3]>>(i<<2)&15)}function Z(t){return 0!=(t-286331153&~t&2290649224)}function $(t){return t^14540032>>((15&t)<<1)&3}function _(t,e,i){var r=U[t];return i&&(r=$(r)),65520&r|l[15&r][e]}function tt(t,e,i,r){i--;for(var s=1985229328,n=0;n<i;++n){var h=o[i-n],a=~~(e/h);e%=h,a<<=2,t[n]=N(t[n],s>>a&15,r);var u=(1<<a)-1;s=(s&u)+(s>>4&~u)}t[i]=N(t[i],15&s,r)}function et(t,e,i){for(var r=0,o=1985229328,s=0;s<e-1;++s){var n=Q(t[s],i)<<2;r=(e-s)*r+(o>>n&15),o-=286331152<<n}return r}function it(t,e,i,r){t[i-1]=N(t[i-1],0,r);for(var o=i-2;o>=0;--o){t[o]=N(t[o],e%(i-o),r),e=~~(e/(i-o));for(var s=o+1;s<i;++s)Q(t[s],r)>=Q(t[o],r)&&(t[s]=N(t[s],Q(t[s],r)+1,r))}}function rt(t,e,i){for(var r=0,o=0;o<e;++o){r*=e-o;for(var s=o+1;s<e;++s)Q(t[s],i)<Q(t[o],i)&&++r}return r}function ot(t,e,i){for(var o=0,s=4,n=t.length-1;n>=0;n--){(12&Q(t[n],i))===e&&(o+=r[n][s--])}return o}function st(t,e,i,o){for(var s=t.length-1,n=4,h=s,a=s;a>=0;a--)e>=r[a][n]?(e-=r[a][n--],t[a]=N(t[a],n|i,o)):((12&h)===i&&(h-=4),t[a]=N(t[a],h--,o))}function nt(t,e){for(var i=0,r=e-2;r>=0;r--)i^=t%(e-r),t=~~(t/(e-r));return 1&i}var ht=function(){function t(){this.ca=[0,1,2,3,4,5,6,7],this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}return t.EdgeMult=function(t,e,i){for(var r=0;r<12;r++)i.ea[r]=t.ea[e.ea[r]>>1]^1&e.ea[r]},t.CornMult=function(t,e,i){for(var r=0;r<8;r++){var o=((t.ca[7&e.ca[r]]>>3)+(e.ca[r]>>3))%3;i.ca[r]=7&t.ca[7&e.ca[r]]|o<<3}},t.CornMultFull=function(t,e,i){for(var r=0;r<8;r++){var o=t.ca[7&e.ca[r]]>>3,s=e.ca[r]>>3,n=o+(o<3?s:6-s);n=n%3+(o<3==s<3?0:3),i.ca[r]=7&t.ca[7&e.ca[r]]|n<<3}},t.CornConjugate=function(t,e,i){for(var r=c[m[0][e]],o=c[e],s=0;s<8;s++){var n=r.ca[7&t.ca[7&o.ca[s]]]>>3,h=t.ca[7&o.ca[s]]>>3,a=n<3?h:(3-h)%3;i.ca[s]=7&r.ca[7&t.ca[7&o.ca[s]]]|a<<3}},t.EdgeConjugate=function(t,e,i){for(var r=c[m[0][e]],o=c[e],s=0;s<12;s++)i.ea[s]=r.ea[t.ea[o.ea[s]>>1]>>1]^1&t.ea[o.ea[s]>>1]^1&o.ea[s]},t.prototype.init=function(t,e){return this.ca=t.slice(),this.ea=e.slice(),this},t.prototype.initCoord=function(t,e,i,r){return tt(this.ca,t,8,!1),this.setTwist(e),it(this.ea,i,12,!0),this.setFlip(r),this},t.prototype.isEqual=function(t){for(var e=0;e<8;e++)if(this.ca[e]!==t.ca[e])return!1;for(var i=0;i<12;i++)if(this.ea[i]!==t.ea[i])return!1;return!0},t.prototype.setFlip=function(t){for(var e,i=0,r=10;r>=0;r--,t>>=1)i^=e=1&t,this.ea[r]=254&this.ea[r]|e;this.ea[11]=254&this.ea[11]|i},t.prototype.getFlip=function(){for(var t=0,e=0;e<11;e++)t=t<<1|1&this.ea[e];return t},t.prototype.getFlipSym=function(){return y[this.getFlip()]},t.prototype.setTwist=function(t){for(var e,i=15,r=6;r>=0;r--,t=~~(t/3))i-=e=t%3,this.ca[r]=7&this.ca[r]|e<<3;this.ca[7]=7&this.ca[7]|i%3<<3},t.prototype.getTwist=function(){for(var t=0,e=0;e<7;e++)t+=(t<<1)+(this.ca[e]>>3);return t},t.prototype.getTwistSym=function(){return b[this.getTwist()]},t.prototype.setCPerm=function(t){tt(this.ca,t,8,!1)},t.prototype.getCPerm=function(){return et(this.ca,8,!1)},t.prototype.getCPermSym=function(){return $(P[et(this.ca,8,!1)])},t.prototype.setEPerm=function(t){tt(this.ea,t,8,!0)},t.prototype.getEPerm=function(){return et(this.ea,8,!0)},t.prototype.getEPermSym=function(){return P[et(this.ea,8,!0)]},t.prototype.getUDSlice=function(){return 494-ot(this.ea,8,!0)},t.prototype.setUDSlice=function(t){st(this.ea,494-t,8,!0)},t.prototype.getMPerm=function(){return rt(this.ea,12,!0)%24},t.prototype.setMPerm=function(t){it(this.ea,t,12,!0)},t.prototype.getCComb=function(){return ot(this.ca,0,!1)},t.prototype.setCComb=function(t){st(this.ca,t,0,!1)},t.prototype.URFConjugate=function(){var e=new t;t.CornMult(t.urf2,this,e),t.CornMult(e,t.urf1,this),t.EdgeMult(t.urf2,this,e),t.EdgeMult(e,t.urf1,this)},t.prototype.toFaceCube=function(t,e){void 0===t&&(t=f),void 0===e&&(e=p);for(var i="URFDLB",r=[],o=0;o<54;o++)r[o]=i[~~(o/9)];for(var s=0;s<8;s++)for(var n=7&this.ca[s],h=this.ca[s]>>3,a=0;a<3;a++)r[t[s][(a+h)%3]]=i[~~(t[n][a]/9)];for(var u=0;u<12;u++)for(var v=this.ea[u]>>1,c=1&this.ea[u],l=0;l<2;l++)r[e[u][(l+c)%2]]=i[~~(e[v][l]/9)];return r.join("")},t.prototype.invFrom=function(t){for(var e=0;e<12;e++)this.ea[t.ea[e]>>1]=e<<1|1&t.ea[e];for(var i=0;i<8;i++)this.ca[7&t.ca[i]]=i|32>>(t.ca[i]>>3)&24;return this},t.prototype.fromFacelet=function(t,e,i){void 0===e&&(e=f),void 0===i&&(i=p);for(var r,o,s,n,h,a=0,u=[],v=t[4]+t[13]+t[22]+t[31]+t[40]+t[49],c=0;c<54;++c){if(u[c]=v.indexOf(t[c]),-1===u[c])return-1;a+=1<<(u[c]<<2)}if(10066329!==a)return-1;for(s=0;s<8;++s){for(h=0;h<3&&(0!==u[e[s][h]]&&3!==u[e[s][h]]);++h);for(r=u[e[s][(h+1)%3]],o=u[e[s][(h+2)%3]],n=0;n<8;++n)if(r===~~(e[n][1]/9)&&o===~~(e[n][2]/9)){this.ca[s]=n|h%3<<3;break}}for(s=0;s<12;++s)for(n=0;n<12;++n){if(u[i[s][0]]===~~(i[n][0]/9)&&u[i[s][1]]===~~(i[n][1]/9)){this.ea[s]=n<<1;break}if(u[i[s][0]]===~~(i[n][1]/9)&&u[i[s][1]]===~~(i[n][0]/9)){this.ea[s]=n<<1|1;break}}},t}(),at=-1,ut=15,ft=15,pt=15,vt=15,ct=15;function lt(t,e,i,r,o,s,n,h){var a=15&h,u=1==(h>>4&1)?14540032:0,f=h>>8&15,p=h>>12&15,v=h>>16&15,c=(1<<a)-1,l=null==r,m=e*i,d=1==(h>>5&1)?10:18,M=10===d?66:599186,g=X(t,m)-1;if(-1===g){for(var S=0;S<1+(m>>3);S++)t[S]=4294967295;V(t,0,15),g=0}else V(t,m,15^g+1);for(var b=Math.min(Math.max(g+1,v),p);g<b;){var w=g>f,P=w?15:g,E=286331153*P,x=w?g:15;g++,at++;for(var F=15^g,L=0,U=0;U<m;U++,L>>=4)if(0!=(7&U)||Z((L=t[U>>3])^E)){if((15&L)===P){var D=U%e,T=~~(U/e),k=0,I=0;l&&(I=7&(k=y[D]),k>>=3);for(var B=0;B<d;B++){var W=s[T][B],q=void 0;q=l?j[R[k][C[B<<3|I]]^I^W&c]:o[r[D][B]][W&c];var O=(W>>=a)*e+q,z=X(t,O);if(z===x){if(w){V(t,U,F);break}V(t,O,F);for(var A=1,G=n[W];0!=(G>>=1);A++)if(1==(1&G)){var H=W*e;X(t,H+=l?j[y[q]^A]:o[q][A^u>>(A<<1)&3])===x&&V(t,H,F)}}else z<g-1&&(B+=M>>B&3)}}}else U+=7}return V(t,m,g+1^15),g+1}function mt(t){ut=lt(W,2048,324,null,null,T,x,103939),at>t||(ft=lt(I,495,324,D,k,T,x,431619),at>t||(pt=lt(B,495,336,D,k,R,E,431619),at>t||(vt=lt(J,24,2768,z,A,q,F,584244),at>t||(ct=lt(K,i,2768,G,H,O,F,514084)))))}function dt(){if(at<0&&(!function(){for(var t=new ht,e=new ht,i=(new ht).initCoord(28783,0,259268407,0),r=(new ht).initCoord(15138,0,119765538,7),o=(new ht).initCoord(5167,0,83473207,0),s=0;s<8;s++)o.ca[s]|=24;for(var n=0;n<16;n++)c[n]=(new ht).init(t.ca,t.ea),ht.CornMultFull(t,r,e),ht.EdgeMult(t,r,e),t.init(e.ca,e.ea),n%4==3&&(ht.CornMultFull(t,o,e),ht.EdgeMult(t,o,e),t.init(e.ca,e.ea)),n%8==7&&(ht.CornMultFull(t,i,e),ht.EdgeMult(t,i,e),t.init(e.ca,e.ea))}(),function(){for(var e=0;e<16;e++)l[e]=[],m[e]=[],d[e]=[],M[e]=[];for(var i=0;i<16;i++)for(var r=0;r<16;r++)l[i][r]=i^r^84660>>r&i<<1&2,m[l[i][r]][r]=i;for(var o=new ht,s=0;s<16;s++)for(var n=0;n<18;n++){ht.CornConjugate(v[n],m[0][s],o);t:for(var a=0;a<18;a++){for(var u=0;u<8;u++)if(v[a].ca[u]!==o.ca[u])continue t;d[s][n]=a,M[s][h[n]]=h[a];break}s%2==0&&(C[n<<3|s>>1]=d[s][n])}function f(t,e,i,r,o,s,n){for(var h=new ht,a=new ht,u=0,f=o>=2?1:2,p=1!==o?ht.EdgeConjugate:ht.CornConjugate,v=0;v<t;v++)if(void 0===i[v]){s.call(h,v);for(var c=0;c<16;c+=f){p(h,c,a);var l=n.call(a);0===o&&(j[u<<3|c>>1]=l),l===v&&(r[u]|=1<<c/f),i[l]=(u<<4|c)/f}e[u++]=v}return u}f(2048,g,y,E,0,ht.prototype.setFlip,ht.prototype.getFlip),f(2187,S,b,x,1,ht.prototype.setTwist,ht.prototype.getTwist),f(40320,w,P,F,2,ht.prototype.setEPerm,ht.prototype.getEPerm);for(var p=new ht,c=0;c<t;c++)tt(p.ea,w[c],8,!0),L[c]=ot(p.ea,0,!0)+70*nt(w[c],8),o.invFrom(p),U[c]=P[o.getEPerm()]}(),function(){var r=new ht,o=new ht;function s(t,e,i,s,n,h,a,u){void 0===u&&(u=null);for(var f=0;f<i;f++){t[f]=[],n.call(r,e[f]);for(var p=0;p<s;p++)a(r,v[u?u[p]:p],o),t[f][p]=h.call(o)}}s(R,g,336,18,ht.prototype.setFlip,ht.prototype.getFlipSym,ht.EdgeMult),s(T,S,324,18,ht.prototype.setTwist,ht.prototype.getTwistSym,ht.CornMult),s(O,w,t,10,ht.prototype.setEPerm,ht.prototype.getEPermSym,ht.EdgeMult,n),s(q,w,t,10,ht.prototype.setCPerm,ht.prototype.getCPermSym,ht.CornMult,n);for(var h=0;h<e;h++){D[h]=[],k[h]=[],r.setUDSlice(h);for(var a=0;a<18;a++)ht.EdgeMult(r,v[a],o),D[h][a]=o.getUDSlice();for(var u=0;u<16;u+=2)ht.EdgeConjugate(r,m[0][u],o),k[h][u>>1]=o.getUDSlice()}for(var f=0;f<24;f++){z[f]=[],A[f]=[],r.setMPerm(f);for(var p=0;p<10;p++)ht.EdgeMult(r,v[n[p]],o),z[f][p]=o.getMPerm();for(var c=0;c<16;c++)ht.EdgeConjugate(r,m[0][c],o),A[f][c]=o.getMPerm()}for(var l=0;l<i;l++){G[l]=[],H[l]=[],r.setCComb(l%70);for(var d=0;d<10;d++)ht.CornMult(r,v[n[d]],o),G[l][d]=o.getCComb()+70*(165>>d&1^~~(l/70));for(var M=0;M<16;M++)ht.CornConjugate(r,m[0][M],o),H[l][M]=o.getCComb()+70*~~(M/70)}}(),at=0),0===at)mt(99);else{if(!(at<54))return!0;mt(at)}return!1}var Mt=function(){function t(){this.twist=0,this.tsym=0,this.flip=0,this.fsym=0,this.slice=0,this.prun=0,this.twistc=0,this.flipc=0}return t.prototype.setWithPrun=function(t,i){if(this.twist=t.getTwistSym(),this.flip=t.getFlipSym(),this.tsym=7&this.twist,this.twist=this.twist>>3,this.prun=Y(ut,W,this.twist<<11|j[this.flip^this.tsym]),this.prun>i)return!1;if(this.fsym=7&this.flip,this.flip=this.flip>>3,this.slice=t.getUDSlice(),this.prun=Math.max(this.prun,Math.max(Y(ft,I,this.twist*e+k[this.slice][this.tsym]),Y(pt,B,this.flip*e+k[this.slice][this.fsym]))),this.prun>i)return!1;var r=new ht;return ht.CornConjugate(t,1,r),ht.EdgeConjugate(t,1,r),this.twistc=r.getTwistSym(),this.flipc=r.getFlipSym(),this.prun=Math.max(this.prun,Y(ut,W,this.twistc>>3<<11|j[this.flipc^7&this.twistc])),this.prun<=i},t.prototype.doMovePrun=function(t,i){return this.slice=D[t.slice][i],this.flip=R[t.flip][C[i<<3|t.fsym]],this.fsym=7&this.flip^t.fsym,this.flip>>=3,this.twist=T[t.twist][C[i<<3|t.tsym]],this.tsym=7&this.twist^t.tsym,this.twist>>=3,this.prun=Math.max(Math.max(Y(ft,I,this.twist*e+k[this.slice][this.tsym]),Y(pt,B,this.flip*e+k[this.slice][this.fsym])),Y(ut,W,this.twist<<11|j[this.flip<<3|this.fsym^this.tsym])),this.prun},t.prototype.doMovePrunConj=function(t,e){return e=d[3][e],this.flipc=R[t.flipc>>3][C[e<<3|7&t.flipc]]^7&t.flipc,this.twistc=T[t.twistc>>3][C[e<<3|7&t.twistc]]^7&t.twistc,Y(ut,W,this.twistc>>3<<11|j[this.flipc^7&this.twistc])},t}(),Ct=function(){function t(){this.move=[],this.moveSol=[],this.moveSolStr="",this.nodeUD=[],this.valid1=0,this.allowShorter=!1,this.cc=new ht,this.urfCubieCube=[],this.urfCoordCube=[],this.phase1Cubie=[],this.preMoveCubes=[],this.preMoves=[],this.preMoveLen=0,this.maxPreMoves=0,this.isRec=!1;for(var t=0;t<21;t++)this.nodeUD[t]=new Mt,this.phase1Cubie[t]=new ht;for(var e=0;e<6;e++)this.urfCubieCube[e]=new ht,this.urfCoordCube[e]=new Mt;for(var i=0;i<20;i++)this.preMoveCubes[i+1]=new ht}return t.prototype.solution=function(t,e,i,r,o){void 0===e&&(e=21),void 0===i&&(i=1e9),void 0===r&&(r=0),void 0===o&&(o=0),dt();var s=this.verify(t);return 0!==s?"Error "+Math.abs(s):(this.sol=e+1,this.probe=0,this.probeMax=i,this.probeMin=Math.min(r,i),this.verbose=o,this.moveSol=null,this.moveSolStr="",this.isRec=!1,this.initSearch(),this.search())},t.prototype.initSearch=function(){this.conjMask=0,this.maxPreMoves=this.conjMask>7?0:20;for(var t=0;t<6;t++)if(this.urfCubieCube[t].init(this.cc.ca,this.cc.ea),this.urfCoordCube[t].setWithPrun(this.urfCubieCube[t],20),this.cc.URFConjugate(),t%3==2){var e=(new ht).invFrom(this.cc);this.cc.init(e.ca,e.ea)}},t.prototype.verify=function(t){if(-1===this.cc.fromFacelet(t))return-1;for(var e=0,i=0,r=0;r<12;r++)i|=1<<(this.cc.ea[r]>>1),e^=1&this.cc.ea[r];if(4095!==i)return-2;if(0!==e)return-3;var o=0;e=0;for(var s=0;s<8;s++)o|=1<<(7&this.cc.ca[s]),e+=this.cc.ca[s]>>3;return 255!==o?-4:e%3!=0?-5:0!=(nt(rt(this.cc.ea,12,!0),12)^nt(this.cc.getCPerm(),8))?-6:0},t.prototype.phase1PreMoves=function(t,e,i){if(this.preMoveLen=this.maxPreMoves-t,(this.isRec?this.depth1===this.length1-this.preMoveLen:0===this.preMoveLen||0==(225207>>e&1))&&(this.depth1=this.length1-this.preMoveLen,this.phase1Cubie[0].init(i.ca,i.ea),this.allowShorter=7===this.depth1&&0!==this.preMoveLen,this.nodeUD[this.depth1+1].setWithPrun(i,this.depth1)&&0===this.phase1(this.nodeUD[this.depth1+1],this.depth1,-1)))return 0;if(0===t||this.preMoveLen+7>=this.length1)return 1;var r=0;(1===t||this.preMoveLen+1+7>=this.length1)&&(r|=225207),e=3*~~(e/3);for(var o=0;o<18;o++){if(o!==e&&o!==e-9&&o!==e+9){if(!(this.isRec&&o!==this.preMoves[this.maxPreMoves-t]||0!=(r&1<<o)))if(ht.CornMult(v[o],i,this.preMoveCubes[t]),ht.EdgeMult(v[o],i,this.preMoveCubes[t]),this.preMoves[this.maxPreMoves-t]=o,0===this.phase1PreMoves(t-1,o,this.preMoveCubes[t]))return 0}else o+=2}return 1},t.prototype.search=function(){for(this.length1=this.isRec?this.length1:0;this.length1<this.sol;this.length1++)for(this.urfIdx=this.isRec?this.urfIdx:0;this.urfIdx<6;this.urfIdx++)if(0==(this.conjMask&1<<this.urfIdx)&&0===this.phase1PreMoves(this.maxPreMoves,-30,this.urfCubieCube[this.urfIdx]))return null==this.moveSol?"Error 8":this.moveSolStr;return null==this.moveSol?"Error 7":this.moveSolStr},t.prototype.initPhase2Pre=function(){if(this.isRec=!1,this.probe>=(null==this.moveSol?this.probeMax:this.probeMin))return 0;++this.probe;for(var t=this.valid1;t<this.depth1;t++)ht.CornMult(this.phase1Cubie[t],v[this.move[t]],this.phase1Cubie[t+1]),ht.EdgeMult(this.phase1Cubie[t],v[this.move[t]],this.phase1Cubie[t+1]);this.valid1=this.depth1;var e=this.initPhase2(this.phase1Cubie[this.depth1]);if(0===e||0===this.preMoveLen||2===e)return e;var i=3*~~(this.preMoves[this.preMoveLen-1]/3)+1;return ht.CornMult(v[i],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]),ht.EdgeMult(v[i],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]),this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2,e=this.initPhase2(this.phase1Cubie[this.depth1+1]),this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2,e},t.prototype.initPhase2=function(t){var e=t.getCPermSym(),r=15&e;e>>=4;var o=t.getEPermSym(),s=15&o;o>>=4;var n,h=t.getMPerm(),a=_(o,s,!1),u=_(e,r,!0),f=Math.max(Y(vt,J,24*e+A[h][r]),Y(ct,K,o*i+H[255&L[e]][m[s][r]]),Y(ct,K,(a>>4)*i+H[255&L[u>>4]][m[15&a][15&u]])),p=Math.min(13,this.sol-this.length1);if(f>=p)return f>p?2:1;for(n=p-1;n>=f;n--){var v=this.phase2(o,s,e,r,h,n,this.depth1,10);if(v<0)break;n-=v,this.moveSol=[];for(var c=0;c<this.depth1+n;c++)this.appendSolMove(this.move[c]);for(var l=this.preMoveLen-1;l>=0;l--)this.appendSolMove(this.preMoves[l]);this.sol=this.moveSol.length,this.moveSolStr=this.solutionToString()}return n!==p-1&&this.probe>=this.probeMin?0:1},t.prototype.phase1=function(t,e,i){if(0===t.prun&&e<5){if(this.allowShorter||0===e){this.depth1-=e;var r=this.initPhase2Pre();return this.depth1+=e,r}return 1}for(var o=0;o<18;o+=3)if(o!==i&&o!==i-9)for(var s=0;s<3;s++){var n=o+s;if(!this.isRec||n===this.move[this.depth1-e]){var h=this.nodeUD[e].doMovePrun(t,n);if(h>e)break;if(h!==e){if((h=this.nodeUD[e].doMovePrunConj(t,n))>e)break;if(h!==e){this.move[this.depth1-e]=n,this.valid1=Math.min(this.valid1,this.depth1-e);var a=this.phase1(this.nodeUD[e],e-1,o);if(0===a)return 0;if(2===a)break}}}}return 1},t.prototype.appendSolMove=function(t){if(0!==this.moveSol.length){var e=~~(t/3),i=~~(this.moveSol[this.moveSol.length-1]/3);if(e!==i)if(this.moveSol.length>1&&e%3==i%3&&e===~~(this.moveSol[this.moveSol.length-2]/3)){var r=(t%3+this.moveSol[this.moveSol.length-2]%3+1)%4;3===r?(this.moveSol[this.moveSol.length-2]=this.moveSol[this.moveSol.length-1],this.moveSol.pop()):this.moveSol[this.moveSol.length-2]=3*e+r}else this.moveSol.push(t);else{var o=(t%3+this.moveSol[this.moveSol.length-1]%3+1)%4;3===o?this.moveSol.pop():this.moveSol[this.moveSol.length-1]=3*e+o}}else this.moveSol.push(t)},t.prototype.phase2=function(t,e,r,o,s,h,u,f){if(0===t&&0===r&&0===s)return h;for(var p=a[f],v=0;v<10;v++)if(0==(p>>v&1)){var c=z[s][v],d=q[r][M[o][v]],C=l[15&d][o];d>>=4;var g=O[t][M[e][v]],y=l[15&g][e],S=_(g>>=4,y,!1),b=_(d,C,!0),w=Y(ct,K,(S>>4)*i+H[255&L[b>>4]][m[15&S][15&b]]);if(w>h+1)break;if(w>=h)v+=66>>v&3&h-w;else if((w=Math.max(Y(ct,K,g*i+H[255&L[d]][m[y][C]]),Y(vt,J,24*d+A[c][C])))>=h)v+=66>>v&3&h-w;else{var P=this.phase2(g,y,d,C,c,h-1,u+1,v);if(P>=0)return this.move[u]=n[v],P}}else v+=66>>v&3;return-1},t.prototype.solutionToString=function(){var t="",e=0!=(2&this.verbose)?(this.urfIdx+3)%6:this.urfIdx;if(e<3)for(var i=0;i<this.moveSol.length;++i)t+=s[u[e][this.moveSol[i]]]+" ";else for(var r=this.moveSol.length-1;r>=0;--r)t+=s[u[e][this.moveSol[r]]]+" ";return t},t}();!function(){for(var t=0;t<18;t++)h[n[t]]=t;for(var e=0;e<10;e++){var i=~~(n[e]/3);a[e]=0;for(var s=0;s<10;s++){var u=~~(n[s]/3);a[e]|=(i===u||i%3==u%3&&i>=u?1:0)<<s}}a[10]=0;for(var f=0;f<13;f++){r[f]=[],o[f+1]=o[f]*(f+1),r[f][0]=r[f][f]=1;for(var p=1;p<13;p++)r[f][p]=p<=f?r[f-1][p-1]+r[f-1][p]:0}}(),function(){for(var t=0;t<18;t++)v[t]=new ht;v[0].initCoord(15120,0,119750400,0),v[3].initCoord(21021,1494,323403417,0),v[6].initCoord(8064,1236,29441808,550),v[9].initCoord(9,0,5880,0),v[12].initCoord(1230,412,2949660,0),v[15].initCoord(224,137,328552,137);for(var e=0;e<18;e+=3)for(var i=0;i<2;i++)ht.EdgeMult(v[e+i],v[e],v[e+i+1]),ht.CornMult(v[e+i],v[e],v[e+i+1]);ht.urf1=(new ht).initCoord(2531,1373,67026819,1367),ht.urf2=(new ht).initCoord(2089,1906,322752913,2040)}();var gt={solve:function(t){return(new Ct).solution(t)},randomCube:function(){var t,e,i=~~(2048*Math.random()),r=~~(2187*Math.random());do{t=~~(Math.random()*o[12]),e=~~(Math.random()*o[8])}while(nt(e,8)!==nt(t,12));return(new ht).initCoord(e,r,t,i).toFaceCube()}};return{get333Scramble:function(){return gt.solve(gt.randomCube())}}}));
